<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <style>
        body,
        html {
            height: 100vh;
            width: 100vw;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>

</head>

<body class="bg-[#F9FAFB]">
    <% if (Array.isArray(success) && success.length > 0) { %>
        <% success.forEach(function(msg) { %>
            <div class="absolute top-5 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-200 text-green-800 p-2 rounded flash-msg">
                <span class="inline-block mt-1 mb-1 ">
                    <%= msg %>
                </span>
            </div>
        <% }) %>
    <% } %>
    <% if (Array.isArray(info) && info.length > 0) { %>
        <% info.forEach(function(msg) { %>
            <div class="absolute top-5 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-blue-200 text-blue-800 p-2 rounded flash-msg">
                <span class="inline-block mt-1 mb-1 ">
                    <%= msg %>
                </span>
            </div>
        <% }) %>
    <% } %>
    
    <div id="main" class="h-full w-full hide-scrollbar scrollbar-hide overflow-y-scroll">
        <div class="w-full h-[40px] flex justify-center top-0 sticky t z-20 bg-[#F9FAFB] 
        sm:h-[80px]">
            <div id="navbar" class="
                w-full h-[40px] flex flex-wrap  items-center justify-between overflow-hidden bg-[#34664f]   
                sm:max-lg:w-[80%] sm:h-[80px] 
                lg:w-full">
                <div class="w-[30%] h-full flex items-center ">
                    <h1 class="
                    text-2xl font-bold w-1/2 ml-3 text-[#F1A155]
                    sm:text-4xl sm:font-bold sm:w-1/2 sm:ml-10 
                    lg:text-5xl">Shyne</h1>
                </div>
                <div class="
                    w-[40%] h-2/3 pl-10 rounded-4xl bg-white flex items-center text-xl text-[#F1A155] outline-none z-50
                    sm:w-[40%] sm:h-2/3 ">
                    <input type="text" placeholder="search by name" name="searchInput" class="
                    text-xl text-[#34664f] outline-none w-[80%]
                    sm:text-2xl ">
                    <i class="fa-solid fa-magnifying-glass  pr-0 text-xl 
                    sm:text-2xl
                    lg:text-4xl"></i>
                </div>
                <div class="w-[30%] h-full flex items-center text-white justify-end gap-10 text-xl pr-8
                sm:text-2xl
                lg:text-4xl">
                    <a href="/users/cart/<%= user._id %>">
                        <i class="fa-solid fa-cart-shopping hover:text-[#F1A155]"></i>
                    </a>
                    <a href="/users/account/<%= user._id %>">
                        <i class="fa-solid fa-user hover:text-[#F1A155]"></i>
                    </a>
                    <a href="/users/account/<%= user._id %>">
                        <i class="fa-solid fa-bars hover:text-[#F1A155]"></i>
                    </a>
                </div>

            </div>
        </div>
        <div id="content-area" class="h-full w-full  flex flex-wrap z-10">
            <div id="sideBar" class="w-1/5 h-[80%] p-10 sticky border-r-2 border-black top-28 z-10 hidden
            lg:block">
                <label for="Sort By" class="outline-none">Sort By:
                    <select id="cars" name="sort" class="outline-none rounded-2xl">
                        <option value="popular">popular</option>
                        <option value="latest">latest</option>
                    </select>
                </label>
                <div class="w-full h-1/3 mt-12 flex flex-col gap-1 p-4 space-y-2">
                    <label>
                        <input type="radio" name="filter1" class="hidden peer">
                        <span
                            class="peer-checked:text-black peer-checked:font-semibold text-zinc-700 cursor-pointer">New
                            Collection</span>
                    </label>

                    <label>
                        <input type="radio" name="filter1" class="hidden peer" checked>
                        <span
                            class="peer-checked:text-black peer-checked:font-semibold text-zinc-700 cursor-pointer">All
                            Products</span>
                    </label>

                    <label>
                        <input type="radio" name="filter1" class="hidden peer">
                        <span
                            class="peer-checked:text-black peer-checked:font-semibold text-zinc-700 cursor-pointer">Discounted
                            Products</span>
                    </label>
                </div>
                <div class="p-4">
                    <p class="text-black font-medium mb-2">Filter by:</p>
                    <div class="flex flex-col space-y-2">
                        <label>
                            <input type="radio" name="filter2" class="hidden peer" checked>
                            <div
                                class="peer-checked:text-black peer-checked:font-semibold text-zinc-700 cursor-pointer">
                                Availability</div>
                        </label>
                        <label>
                            <input type="radio" name="filter2" class="hidden peer">
                            <div
                                class="peer-checked:text-black peer-checked:font-semibold text-zinc-700 cursor-pointer">
                                Discount</div>
                        </label>
                    </div>
                </div>

            </div>
            <div id="topbar" class="w-full h-[40px] mt-3 pl-2 flex flex-wrap justify-start items-center gap-3 border-t-[1px] border-b-[1px] border-zinc-700 
            lg:hidden">
                <label for="sort" class="outline-none w-1/4 h-3/4 hover:border-2 hover:border-zinc-700 rounded-3xl">
                    <select name="sort" class="outline-none ">
                        <option value="popular">popular</option>
                        <option value="latest">latest</option>
                    </select>
                </label>
                <label for="type" class="outline-none w-1/4 h-3/4 hover:border-2 hover:border-zinc-700 rounded-3xl">
                    <select name="type" class="outline-none ">
                        <option value="all">All</option>
                        <option value="new">New</option>
                        <option value="discounted">Disc.</option>
                    </select>
                </label>
                <label for="Filter" class="outline-none w-1/3 h-3/4 hover:border-2 hover:border-zinc-700 rounded-3xl">
                    <select name="Filter" class="outline-none ">
                        <option value="available">Availability</option>
                        <option value="discount">Discounted</option>
                    </select>
                </label>

            </div>
            <div id="body"
                class="
                w-full h-full flex flex-wrap gap-5 overflow-hidden overflow-y-auto hide-scrollbar pl-3 pt-3
                sm:w-4/5 sm:h-full sm:p-10 sm:flex sm:flex-wrap sm:gap-10 sm:overflow-hidden sm:overflow-y-auto sm:hide-scrollbar">
                <% if(product.length> 0){ %>
                    <% product.forEach(function(val){ %>
                        <div class="
                        h-[37%] w-[45%] flex flex-col rounded-md overflow-hidden shadow-md shadow-black
                        sm:h-[40%] sm:w-[20%] hover:border-2 hover:border-[#F1A155] hover:shadow-md hover:shadow-[#F1A155]">
                            <div class="h-2/3 w-full" style="background-color: #<%= val.bgcolor %>;">
                                <img src="/uploads/<%= val.image %>" alt=""
                                    class="w-full h-full object-contain overflow-hidden">
                            </div>
                            <div class="h-1/3 w-full flex justify-between items-center pr-2 pl-2"
                                style="background-color: #<%= val.panelcolor %>;">
                                <div class="flex flex-col gap-[-2px]">
                                    <h1 class="text-[18px] sm:text-2xl" style="color: #<%= val.textcolor %>">
                                        <%= val.name %>
                                    </h1>
                                    <h1 class="text-[16px] sm:text-xl" style="color: #<%= val.textcolor %>">
                                        ₹<%= val.price %>
                                    </h1>
                                    <% if(val.discount> 0){ %>
                                        <h1 class="text-[16px] text-green-500 sm:text-xl">₹<%= val.discount %>
                                                off</h1>
                                        <% } %>
                                </div>

                                <button class="h-7 w-7 text-white rounded-full bg-[#F1A155] flex justify-center items-center transition delay-75 duration-300 ease-in 
                                    sm:h-10 sm:w-10 addbtn " onclick="toggleIcon(this)">
                                    <a href="/addtocart/<%= val.id %>">
                                        <i class="fa-solid fa-cart-plus"></i>
                                    </a>
                                </button>

                            </div>
                        </div>
                        <% }) %>
                            <% }else{ %>
                                <h1>No products yet</h1>
                                <% } %>


            </div>
        </div>
    <footer class="w-full bg-[#34664f] text-white py-6 px-4  bottom-0 left-0 flex flex-col sm:flex-row justify-between items-center z-50">
        <div class="flex flex-col sm:flex-row gap-4 sm:gap-10 mb-2 sm:mb-0">
            <a href="/contact" class="hover:text-[#F1A155] transition-colors duration-200">Contact Us</a>
            <a href="/feedback" class="hover:text-[#F1A155] transition-colors duration-200">Feedback</a>
            <a href="/services" class="hover:text-[#F1A155] transition-colors duration-200">Services</a>
        </div>
        <div class="flex flex-col sm:flex-row items-center gap-2 sm:gap-4">
            <span class="flex items-center gap-1">
                Made with <span class="text-red-500 text-lg">♥</span> By                
                <span class="font-semibold">Utkarsh</span>
            </span>
            <div class="flex gap-3 ml-0 sm:ml-2">
                <a href="https://www.linkedin.com/in/utkarsh-soni-6bb1b2322/" target="_blank" rel="noopener" class="hover:text-[#0A66C2]">
                    <i class="fab fa-linkedin fa-lg"></i>
                </a>
                <a href="https://github.com/utkarshsoni1" target="_blank" rel="noopener" class="hover:text-gray-400">
                    <i class="fab fa-github fa-lg"></i>
                </a>
                <a href="mailto:utkarshsoni7777@gmail.com" class="hover:text-[#EA4335]">
                    <i class="fas fa-envelope fa-lg"></i>
                </a>
            </div>
        </div>
    </footer>
    </div>
    <script>
        // Update cart icon to show a checkmark when added to cart, revert to cart-plus otherwise
        function toggleIcon(button) {
            const icon = button.querySelector("i");
            if (icon.classList.contains("fa-cart-plus")) {
                icon.classList.remove("fa-cart-plus");
                icon.classList.add("fa-cart-check");
            } else {
                icon.classList.remove("fa-cart-check");
                icon.classList.add("fa-cart-plus");
            }
        }
        setTimeout(() => {
            document.querySelectorAll('.flash-msg').forEach(el => el.style.display = 'none');
        }, 3000);
    </script>
</body>

</html>